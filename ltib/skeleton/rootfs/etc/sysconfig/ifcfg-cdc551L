#special case for bringing up Verizon USB551L modem

BOOTPROTO="dhcp-b"  #dhcp in background
DHCPNAME=`hostname`

#VPN=$ESPshore/espvpn   #server IP / VPN interface

ifPrep() {  #chat with modem to establish ethernet-like connection
  sleep 5
  modem=`echo \
/dev/serial/by-id/usb-Novatel_Wireless__Inc._Novatel_Wireless_4G_*-if00-port0`
  while [ -w $modem ]; do
    /usr/sbin/chat -v '' ATE0 OK 'AT$NWQMIDISCONNECT' \
        OK AT+CFUN=0 OK '\d\d\d\d\dAT+CFUN=1' \
        OK '\d\d\d\d\d\d\d\d\d\d\d\d\d\d\d\d\d\d\d\dAT\$NWQMICONNECT=,' OK '' \
          <$modem >$modem && {
      sleep 30
      return
    }
  done
}


hosts() {    #add lines before EOS
  cat <<EOS
$(netIfIP $IFNAME $DHCPNAME-$IFNAME)
EOS
}
