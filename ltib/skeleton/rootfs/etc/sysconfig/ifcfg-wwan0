IFNAME=wwan0
. $syscfg/if-default

BOOTPROTO="dhcp-b -t30"

#me910 on AT&T OneRate drops service every few hours
#detaching and reattaching when this happens reestablishes the connection

atCmd() {
#$1 is command string 
#$2 are options passed thru to chat (timeout in secs)
  local AT=/dev/AT/$IFNAME  #in case there are multiple
  [ -c "$AT" ] || return 0  #return success if not an me910 modem
  /usr/sbin/chat -v$2 ABORT ERROR '' "$1" OK <$AT >$AT
}

ifDetach() {
  atCmd "AT+CGATT=0" t20
}
ifPrep() {
  ifDetach
  atCmd "AT+CFUN=1;+CGATT=1" t30
}
