# pppd configuration for internet via iridium 9555  - 10/1/19 brent@mbari.org

#connection
linkname iridium
remotename iridium

noauth       #no password authorization
#persist     #don't terminate if the link breaks
#holdoff 90  #try to reestablish link waiting this many seconds
#maxfail 0   #never give up!

#debugging options
#debug
#record /tmp/ppptrace.out
#kdebug

#logging options
logfile /var/log/iridium.pppdlog
#dump

#RS-232 port configuration
iridium      #symlink /dev/freewave to the iridium modem's serial port
crtscts      #hardware RTS/CTS handshaking
modem        #monitor carrier detect
lock         #request exclusive access to the port

# Add the PPP interface as the default route to the IP routing table.
defaultroute

#
# Advises PPPD to request any DHCP address, none in particular.
noipdefault
#
# Advises PPPD to use the DNS provided by DHCP.
usepeerdns

#
# Allows the PPPD daemon to accept DHCP assigned IPs.
ipcp-accept-local
ipcp-accept-remote

#modem will signal dropped link
lcp-echo-failure 0

#Iridium internet gateway supports compression :-)
deflate 15      #deflate within a 32kB window
vj-max-slots 16 #allow header compression

#connect to Iridium's internet service
connect "exec /usr/sbin/chat -T 008816000025 -vEf /etc/ppp/iridium.chat"

#hang up the phone on disconnect (ignore errors) -- no need on USB serial link
#disconnect "/usr/sbin/chat -vEf /etc/ppp/hangup.chat; true"
