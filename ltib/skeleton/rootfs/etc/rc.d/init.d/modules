#!/bin/sh
PATH=$PATH:/sbin:/bin

modlist=/etc/modules

case "$1" in
    start)
       echo "Loading kernel modules"
       #load built-in ethernet first to ensure is gets named eth0
       for module in ks8851_mll dm9000; do
         [ -e /sys/bus/platform/devices/$module.* ] && modprobe $module
       done
       [ -r $modlist ] || {
         echo "Cannot read $modlist" >&2
         exit 2
       }
       while IFS='#'; read args comment; do
         unset IFS
         [ -n "$args" ] && {
           set $args
           modprobe "$@"
         }
       done < $modlist
       :
       ;;
    stop)
       :
       ;;

     *)
       echo "usage: modules {start|stop}"
       ;;
esac
