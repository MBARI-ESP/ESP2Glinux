IFNAME=wg2shore
username=`hostname`
WGshore=192.168.5.1		#see /etc/wireguard/$IFNAME.conf

resolv_conf() {
  local first rest
  read first rest </etc/DOMAINS
  cat<<EOS
search `searchDomains $first esp`
nameserver $WGshore
EOS
}
hosts() { cat <<EOS    #add lines before EOS
$(netIfIP $IFNAME $(hostname)-$IFNAME)
$WGshore shore mail
EOS
}
ifPrep() {
  upping Wireguard
  wg-quick up $IFNAME
  masquerade -A $IFNAME
}
ifPost() {
  optimizeWg2shore
  mkdir -p $run/dns &&
  resolv_conf | tee $run/dns/$IFNAME | updateResolv && hostsUp $IFNAME
}
ifClose() {
  rm -f $run/dns/$IFNAME
  masquerade -D $IFNAME
  wg-quick down $IFNAME
}
